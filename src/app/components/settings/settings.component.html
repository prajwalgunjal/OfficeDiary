<div class="settings">
  <div class="settings-header">
    <h1>‚öôÔ∏è Settings</h1>
    <p>Customize your StatusSync experience</p>
  </div>

  <div class="settings-section">
    <h2>Appearance</h2>
    <div class="setting-item">
      <div class="setting-info">
        <h3>Theme</h3>
        <p>Choose between light and dark mode</p>
      </div>
      <button class="theme-toggle-btn" (click)="themeService.toggleTheme()">
        <span class="theme-icon">{{ (themeService.isDarkMode$ | async) ? '‚òÄÔ∏è' : 'üåô' }}</span>
        <span class="theme-text">{{ (themeService.isDarkMode$ | async) ? 'Light Mode' : 'Dark Mode' }}</span>
      </button>
    </div>
  </div>

  <div class="settings-section">
    <h2>Integration</h2>
    <div class="setting-item">
      <div class="setting-info">
        <h3>Google Chat Webhook</h3>
        <p>Configure your Google Chat webhook URL for status updates</p>
        <div class="current-config" *ngIf="currentWebhookUrl">
          <span class="config-label">Current URL:</span>
          <span class="config-value">{{ currentWebhookUrl }}</span>
        </div>
      </div>
      <button class="config-btn" (click)="openWebhookModal()">
        {{ currentWebhookUrl ? 'Update' : 'Configure' }}
      </button>
    </div>
  </div>

  <div class="settings-section">
    <h2>Account</h2>
    <div class="setting-item">
      <div class="setting-info">
        <h3>Sign Out</h3>
        <p>Sign out of your StatusSync account</p>
      </div>
      <button class="logout-btn" (click)="logout()">
        <span class="logout-icon">üö™</span>
        Sign Out
      </button>
    </div>
  </div>

  <!-- Webhook Configuration Modal -->
  <div class="modal-overlay" *ngIf="showWebhookModal" (click)="closeWebhookModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h2>üîó Configure Google Chat Webhook</h2>
        <button class="modal-close-btn" (click)="closeWebhookModal()">√ó</button>
      </div>

      <div class="modal-body">
        <div class="form-group">
          <label>Webhook URL *</label>
          <input 
            type="url" 
            [(ngModel)]="webhookUrl" 
            placeholder="https://chat.googleapis.com/v1/spaces/..." 
            class="form-input"
            [class.error]="webhookError">
          <div class="error-message" *ngIf="webhookError">{{ webhookError }}</div>
          <div class="help-text">
            <p>To get your Google Chat webhook URL:</p>
            <ol>
              <li>Go to your Google Chat space</li>
              <li>Click on the space name ‚Üí Apps & integrations</li>
              <li>Click "Add webhooks" and create a new webhook</li>
              <li>Copy the webhook URL and paste it here</li>
            </ol>
          </div>
        </div>
      </div>

      <div class="modal-footer">
        <button class="cancel-btn" (click)="closeWebhookModal()">Cancel</button>
        <button 
          class="save-btn" 
          (click)="saveWebhookConfig()" 
          [disabled]="isSaving || !webhookUrl">
          <span class="btn-icon" *ngIf="isSaving">‚è≥</span>
          {{ isSaving ? 'Saving...' : 'Save Configuration' }}
        </button>
      </div>
    </div>
  </div>
</div>